---
interface Props {
  title: string;
  description: string;
  ogImage?: string;
  ogType?: string;
  twitterCard?: string;
  keywords?: string[];
  author?: string;
  canonical?: string;
}

const { 
  title, 
  description, 
  ogImage = '/logo.svg',
  ogType = 'website',
  twitterCard = 'summary_large_image',
  keywords = [],
  author = 'Антон Двинянинов',
  canonical
} = Astro.props;

const currentUrl = canonical || Astro.url.href;
---

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>{title}</title>
    <meta name="description" content={description}>
    {keywords.length > 0 && <meta name="keywords" content={keywords.join(', ')}>}
    <meta name="author" content={author}>
    <link rel="canonical" href={currentUrl}>
    
    <!-- Open Graph -->
    <meta property="og:type" content={ogType}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description}>
    <meta property="og:url" content={currentUrl}>
    <meta property="og:image" content={ogImage}>
    <meta property="og:site_name" content="Антон Двинянинов — Full-stack разработчик">
    <meta property="og:locale" content="ru_RU">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content={twitterCard}>
    <meta name="twitter:title" content={title}>
    <meta name="twitter:description" content={description}>
    <meta name="twitter:image" content={ogImage}>
    
    <!-- Schema.org -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": title,
      "description": description,
      "url": currentUrl,
      "author": {
        "@type": "Person",
        "name": author
      }
    })} />
    
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="theme-color" content="#0D4CD3">
    
    <!-- DNS prefetch для внешних ресурсов -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    
    <!-- Preload критичных шрифтов -->
    <link rel="preload" href="/fonts/space-grotesk-700.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/space-grotesk-600.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/images/projects/zooplatforma.webp" as="image" type="image/webp">
    
    <!-- Inline critical CSS для устранения блокирующих запросов -->
    <style>
        /* Fonts */
        @font-face {
            font-family: 'Space Grotesk';
            src: url('/fonts/space-grotesk-600.woff2') format('woff2');
            font-weight: 600;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Space Grotesk';
            src: url('/fonts/space-grotesk-700.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Space Grotesk';
            src: url('/fonts/space-grotesk-400.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        /* Critical above-the-fold styles */
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#fff;--text:#1F2229;--text-secondary:#5D6066;--accent:#0D4CD3;--accent-hover:#0A3BA8;--border:#E5E7EB;--card-bg:#F9FAFB;--spacing-md:16px;--spacing-lg:24px;--spacing-xl:32px;--radius-md:8px;--line-height-normal:1.5}
        body{font-family:'Space Grotesk',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;font-size:16px;line-height:var(--line-height-normal)}
        .noise{position:fixed;top:0;left:0;width:100%;height:100%;opacity:.03;z-index:-1;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' /%3E%3C/svg%3E")}
        
        /* Header */
        .header{position:fixed;top:0;left:0;right:0;padding:20px 60px;display:flex;justify-content:space-between;align-items:center;z-index:1000;background:rgba(255,255,255,.8);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
        .logo{font-size:24px;font-weight:700;text-decoration:none;color:var(--text);font-family:'Space Mono',monospace}
        .logo__bracket{color:var(--accent)}
        .nav{display:flex;gap:40px}
        .nav__link{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text-secondary);font-size:14px;transition:color .3s ease}
        .nav__number{font-family:'Space Mono',monospace;font-size:12px;color:var(--accent)}
        .header__right{display:flex;align-items:center;gap:30px}
        
        /* Vertical Nav */
        .vertical-nav{position:fixed;right:30px;top:50%;transform:translateY(-50%);z-index:1000;display:flex;flex-direction:column;gap:30px}
        .nav-dot{width:12px;height:12px;border:2px solid var(--text-secondary);border-radius:50%;position:relative;transition:all .3s ease;cursor:pointer}
        .nav-dot.active{border-color:var(--accent);background:var(--accent);transform:scale(1.3)}
        
        /* Hero */
        .hero{min-height:100vh;padding:150px 60px 100px;display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center;position:relative;z-index:10}
        .hero__label{display:flex;align-items:center;gap:15px;font-size:14px;color:var(--text-secondary);margin-bottom:30px;text-transform:uppercase;letter-spacing:2px}
        .hero__line{width:40px;height:1px;background:var(--accent)}
        .hero__title{font-size:clamp(60px,12vw,110px);font-weight:900;line-height:.95;margin-bottom:30px;letter-spacing:-.02em}
        .hero__title-line{display:block}
        .word{display:inline-block;margin-right:20px}
        .hero__accent{color:var(--accent);font-style:italic}
        .hero__desc{font-size:20px;color:var(--text-secondary);margin-bottom:50px;max-width:500px}
        .hero__skills{display:flex;gap:40px;margin-bottom:50px}
        .hero__skill{display:flex;flex-direction:column;gap:8px}
        .hero__skill-number{font-family:'Space Mono',monospace;font-size:12px;color:var(--accent)}
        .hero__skill-text{font-size:16px;font-weight:600}
        .hero__cta{display:inline-flex;align-items:center;gap:15px;padding:18px 40px;background:var(--text);color:var(--bg);text-decoration:none;font-weight:600;border-radius:50px;transition:all .3s ease}
        .hero__visual{display:flex;align-items:center;justify-content:center}
        .photo-container{position:relative;width:400px;height:400px;display:flex;align-items:center;justify-content:center}
        .photo-wrapper{position:relative;z-index:2;border-radius:50%;overflow:hidden;width:350px;height:350px}
        .hero-photo{width:100%;height:100%;object-fit:cover}
    </style>
    
    <!-- Остальные шрифты загружаем асинхронно -->
    <link rel="preload" href="/fonts/fonts.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/fonts/fonts.css"></noscript>
    
    <!-- Загружаем CSS асинхронно -->
    <link rel="preload" href="/styles/global.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/styles/global.css"></noscript>
    
    <!-- Google Tag Manager -->
    <script is:inline>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NTP4Z73');
    </script>
    <!-- End Google Tag Manager -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTP4Z73"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="noise"></div>
    
    <slot />
    
    <footer class="footer">
        <div class="footer__left">
            <span>© 2026</span>
            <span class="footer__divider">/</span>
            <span>Антон Двинянинов</span>
        </div>
        <div class="footer__right">
            <span>Сделано с</span>
            <span class="footer__heart">♥</span>
            <span>и кодом</span>
        </div>
    </footer>

    <!-- Defer скриптов для ускорения загрузки -->
    <script src="/scripts/main.js" is:inline defer></script>
    <script src="/scripts/telegram-forms.js" is:inline defer></script>
</body>
</html>
